local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local classic = 2092166489
local juggernaut = 4678052190
local endless = 2675280735
local infection = 1076129670

if game.PlaceId == classic then
local ui = loadstring(game:HttpGet("https://raw.githubusercontent.com/Daffy734/code/refs/heads/main/yep"))()

local win = ui:Create({
    Name = "Celeron's GUI (SAKTK: Classic)",
    ThemeColor = Color3.fromRGB(20, 20, 20),
    StartupSound = "rbxassetid://6958727243",
    ThemeFont = Enum.Font.FredokaOne
})

local maintab = win:Tab("Main")
local misctab = win:Tab("Others")
local helptab = win:Tab("Info")

maintab:Label("Script Made By Celeron + Daffy!")
misctab:Label("Other Features.")
helptab:Label("GUI Controls Are Below, Script Credits Are At The Bottom!")
helptab:Label("Show / Hide GUI: Right Alt")

local runService = game:GetService("RunService")
local players = game:GetService("Players")
local player = players.LocalPlayer

local currentConnection = nil
local deathConnection = nil

function applyEmulatedSpeed(speed)
	if currentConnection then currentConnection:Disconnect() end
	if deathConnection then deathConnection:Disconnect() end

	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	local rootPart = character:WaitForChild("HumanoidRootPart")

	currentConnection = runService.RenderStepped:Connect(function()
		if not character or not character.Parent or humanoid.Health <= 0 then
			if currentConnection then currentConnection:Disconnect() end
			currentConnection = nil
			return
		end

		local moveDir = humanoid.MoveDirection
		if moveDir.Magnitude > 0 then
			local horizontalVelocity = Vector3.new(moveDir.X, 0, moveDir.Z).Unit * speed
			rootPart.Velocity = Vector3.new(horizontalVelocity.X, rootPart.Velocity.Y, horizontalVelocity.Z)
		end
	end)

	deathConnection = humanoid.Died:Connect(function()
		if currentConnection then currentConnection:Disconnect() end
		currentConnection = nil
	end)
end

maintab:Textbox("Player Speed", function(v)
	speed = tonumber(v)
	if not speed then return end

	applyEmulatedSpeed(speed)

	player.CharacterAdded:Connect(function()
		task.wait(0.25)
		applyEmulatedSpeed(speed)
	end)
end)

maintab:Textbox("Gun Grabber", function(v)
	local Players = game:GetService("Players")
	local VirtualInputManager = game:GetService("VirtualInputManager")
	local Workspace = game:GetService("Workspace")

	local player = Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
	local camera = Workspace.CurrentCamera

	local gunOrigin = humanoidRootPart.Position

	local function findGunModel(name)
		local weapons = Workspace:FindFirstChild("Weapons")
		if not weapons then return nil end
		for _, child in ipairs(weapons:GetChildren()) do
			if child:IsA("Model") and child.Name:lower() == name:lower() then
				return child
			end
		end
		return nil
	end

	local function getGunPart(model)
		if not model then return nil end
		for _, part in ipairs(model:GetDescendants()) do
			if part:IsA("BasePart") then
				return part
			end
		end
		return nil
	end

	local function runGunSequence(gunPart)
		if not gunPart then return end
		local position = gunPart.Position
		humanoidRootPart.CFrame = CFrame.new(position)
		camera.CFrame = CFrame.new(camera.CFrame.Position, position)
		task.wait(0.1)
		VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, game)
		task.wait(0.05)
		VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
		humanoidRootPart.CFrame = CFrame.new(gunOrigin)
	end

	local input = v:lower()
	local gunModel = findGunModel(input)
	local gunPart = getGunPart(gunModel)
	runGunSequence(gunPart)
end)

maintab:Button("Kill All NPCs", function()
local Workspace = game:GetService("Workspace")

local killersFolder = Workspace:FindFirstChild("Killers")
if killersFolder then
	for _, obj in ipairs(killersFolder:GetDescendants()) do
		if obj:IsA("Humanoid") and obj.Health > 0 then
			obj.Health = 0
		end
	end
end
end)

maintab:Button("Killer ESP", function()
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local function highlightKillers()
	local killersFolder = Workspace:FindFirstChild("Killers")
	if not killersFolder then return end

	for _, obj in ipairs(killersFolder:GetDescendants()) do
		if obj:IsA("Humanoid") and obj.Health > 0 then
			local model = obj.Parent
			if model and not model:FindFirstChildOfClass("Highlight") then
				local hl = Instance.new("Highlight")
				hl.FillTransparency = 1
				hl.OutlineTransparency = 0
				hl.OutlineColor = Color3.fromRGB(255, 0, 0)
				hl.Adornee = model
				hl.Parent = model
			end
		end
	end
end

task.spawn(function()
	while true do
		highlightKillers()
		task.wait(1)
	end
end)
end)

maintab:Label("Gun Mods.")
local runService = game:GetService("RunService")
local players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local player = players.LocalPlayer

local model = workspace:WaitForChild("AREA51"):WaitForChild("PlantRoom"):WaitForChild("Box of Shells")
local box = model:WaitForChild("Box")
local originalCFrame = box.CFrame
local loopConnection
local infiniteAmmoEnabled = false

local function notifyy(title, text)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = title,
			Text = text,
			Duration = 3
		})
	end)
end

local function ghostifyModel()
	for _, item in ipairs(model:GetDescendants()) do
		if item:IsA("BasePart") then
			item.Transparency = 1
			item.CanCollide = false
		elseif item:IsA("Decal") or item:IsA("SurfaceGui") then
			item.Transparency = 1
		end
	end
end

local function enableInfiniteAmmo()
	infiniteAmmoEnabled = true
	notifyy("Infinite Ammo", "Enabled.")
	ghostifyModel()
	box.Anchored = true
	box.CanCollide = false

	local toggle = false
	local lastToggle = 0

	loopConnection = runService.RenderStepped:Connect(function(dt)
		local char = player.Character
		if not char then return end

		local root = char:FindFirstChild("HumanoidRootPart")
		if not root then return end

		lastToggle += dt
		if lastToggle >= 0.5 then
			lastToggle = 0
			toggle = not toggle

			if toggle then
				local offset = Vector3.new(0, -(root.Size.Y / 2 + box.Size.Y / 2 + 0.1), 0)
				local position = root.Position + offset
				box.CFrame = CFrame.new(position)
			else
				box.CFrame = originalCFrame
			end
		end
	end)
end

local function disableInfiniteAmmo()
	infiniteAmmoEnabled = false
	notifyy("Infinite Ammo", "Disabled.")
	if loopConnection then
		loopConnection:Disconnect()
		loopConnection = nil
	end
	box.CFrame = originalCFrame
end

maintab:Toggle("Infinite Ammo", function()
	if infiniteAmmoEnabled then
		disableInfiniteAmmo()
	else
		enableInfiniteAmmo()
	end
end)

maintab:Button("Remove Doors (Client)", function()
for _, obj in pairs(game:GetService("Workspace"):GetDescendants()) do
    if obj.Name == "Door" then
        obj:Destroy()
    end
end
end)

misctab:Button("Infinite Yield", function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

misctab:Button("Switch Servers", function()
    local servers = {}
    local req = game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true")
    local body = HttpService:JSONDecode(req)

    if body and body.data then
        for i, v in next, body.data do
            if type(v) == "table" and tonumber(v.playing) and tonumber(v.maxPlayers) and v.playing < v.maxPlayers and v.id ~= JobId then
                table.insert(servers, 1, v.id)
            end
        end
    end

    if #servers > 0 then
        TeleportService:TeleportToPlaceInstance(PlaceId, servers[math.random(1, #servers)], Players.LocalPlayer)
end
end)

helptab:Button("Copy Owner Discord Username", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Username",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("ghostofcelleron")
end)

helptab:Button("Copy Discord Server Invite", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Invite",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("https://discord.gg/8stFYxJv4R")
end)

elseif game.PlaceId == endless then
local ui = loadstring(game:HttpGet("https://raw.githubusercontent.com/Daffy734/code/refs/heads/main/yep"))()

local win = ui:Create({
    Name = "Celeron's GUI (SAKTK: Endless)",
    ThemeColor = Color3.fromRGB(20, 20, 20),
    StartupSound = "rbxassetid://6958727243",
    ThemeFont = Enum.Font.FredokaOne
})

local maintab = win:Tab("Main")
local misctab = win:Tab("Others")
local helptab = win:Tab("Info")

maintab:Label("Script Made By Celeron + Daffy!")
helptab:Label("GUI Controls Are Below, Script Credits Are At The Bottom!")
helptab:Label("Show / Hide GUI: Right Alt")

local runService = game:GetService("RunService")
local players = game:GetService("Players")
local player = players.LocalPlayer

local currentConnection = nil

function applyEmulatedSpeed(speed)
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	local rootPart = character:WaitForChild("HumanoidRootPart")

	if currentConnection then currentConnection:Disconnect() end

	currentConnection = runService.RenderStepped:Connect(function(dt)
		if not character or not character.Parent or humanoid.Health <= 0 then
			currentConnection:Disconnect()
			currentConnection = nil
			return
		end

		local moveDir = humanoid.MoveDirection
		if moveDir.Magnitude > 0 then
			local horizontalVelocity = Vector3.new(moveDir.X, 0, moveDir.Z).Unit * speed
			rootPart.Velocity = Vector3.new(horizontalVelocity.X, rootPart.Velocity.Y, horizontalVelocity.Z)
		end
	end)

	humanoid.Died:Connect(function()
		if currentConnection then currentConnection:Disconnect() end
		currentConnection = nil
	end)
end

maintab:Textbox("Player Speed", function(v)
	local speed = tonumber(v)
	if not speed then return end

	applyEmulatedSpeed(speed)

	game.Players.LocalPlayer.CharacterAdded:Connect(function()
		task.wait(0.25)
		applyEmulatedSpeed(speed)
	end)
end)

local gunPositions = {
	["raygun"] = Vector3.new(114, 335, 569),
	["landmine"] = Vector3.new(243, 313, 332),
	["mp5k"] = Vector3.new(232, 373, 47),
	["awp"] = Vector3.new(466, 313, 756),
	["m4a1"] = Vector3.new(-154, 303, 703),
	["r870"] = Vector3.new(20, 292, 241),
	["freezegun"] = Vector3.new(307, 333, 709),
	["desert eagle"] = Vector3.new(171, 260, 406),
	["m14"] = Vector3.new(184, 314, 379),
	["mg42"] = Vector3.new(22, 313, 371),
	["svd"] = Vector3.new(159, 333, 445),
	["db shotgun"] = Vector3.new(106, 272, 101),
	["energy can"] = Vector3.new(173, 333, 587),
	["m16a2"] = Vector3.new(71, 282, 31),
	["m1911"] = Vector3.new(340, 313, 370)
}

maintab:Textbox("Gun Grabber (Legit, Requires Points!)", function(v)
	local Players = game:GetService("Players")
	local VirtualInputManager = game:GetService("VirtualInputManager")
	local Workspace = game:GetService("Workspace")

	local player = Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
	local camera = Workspace.CurrentCamera

	local gunOrigin = humanoidRootPart.Position

	local function findGunModel(name)
		local weapons = Workspace:FindFirstChild("Weapons")
		if not weapons then return nil end
		for _, child in ipairs(weapons:GetChildren()) do
			if child:IsA("Model") and child.Name:lower() == name:lower() then
				return child
			end
		end
		return nil
	end

	local function getGunPart(model)
		if not model then return nil end
		for _, d in ipairs(model:GetDescendants()) do
			if d:IsA("BasePart") then
				return d
			end
		end
		return nil
	end

	local function runGunSequence(gunPart, position)
		if not gunPart then return end
		humanoidRootPart.CFrame = CFrame.new(position)
		camera.CFrame = CFrame.new(camera.CFrame.Position, gunPart.Position)
		task.wait(0.1)
		VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, game)
		task.wait(0.75)
		VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
		humanoidRootPart.CFrame = CFrame.new(gunOrigin)
	end

	local input = v:lower()
	local gunModel = findGunModel(input)
	local gunPart = getGunPart(gunModel)
	local gunPos = gunPositions[input]

	if gunModel and gunPart and gunPos then
		runGunSequence(gunPart, gunPos)
	else
		warn("Gun \"" .. v .. "\" not found or missing position.")
	end
end)

maintab:Button("Kill All NPCs", function()
local Workspace = game:GetService("Workspace")

local killersFolder = Workspace:FindFirstChild("Killers")
if killersFolder then
	for _, obj in ipairs(killersFolder:GetDescendants()) do
		if obj:IsA("Humanoid") and obj.Health > 0 then
			obj.Health = 0
		end
	end
end
end)

maintab:Button("Enable Power", function()
game:GetService("Players").LocalPlayer.Character:WaitForChild("HumanoidRootPart").CFrame = CFrame.new(127, 323, 599)
game:GetService("Workspace").CurrentCamera.CFrame = CFrame.new(game:GetService("Workspace").CurrentCamera.CFrame.Position, game:GetService("Workspace").AREA51.ElectricityRoom.PowerManager.Interruptor.Base.Position)
game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
task.wait(3)
game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.E, false, game)
game:GetService("Workspace").Doors.Horizontal.ElectricityRoom.Door.Door:Destroy()
end)

maintab:Button("Remove Doors (Client)", function()
for _, obj in pairs(game:GetService("Workspace"):GetDescendants()) do
    if obj.Name == "Door" then
        obj:Destroy()
    end
end
end)

misctab:Button("Infinite Yield", function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

misctab:Button("Switch Servers", function()
    local servers = {}
    local req = game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true")
    local body = HttpService:JSONDecode(req)

    if body and body.data then
        for i, v in next, body.data do
            if type(v) == "table" and tonumber(v.playing) and tonumber(v.maxPlayers) and v.playing < v.maxPlayers and v.id ~= JobId then
                table.insert(servers, 1, v.id)
            end
        end
    end

    if #servers > 0 then
        TeleportService:TeleportToPlaceInstance(PlaceId, servers[math.random(1, #servers)], Players.LocalPlayer)
end
end)

helptab:Button("Copy Owner Discord Username", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Username",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("ghostofcelleron")
end)

helptab:Button("Copy Discord Server Invite", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Invite",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("https://discord.gg/8stFYxJv4R")
end)

elseif game.PlaceId == juggernaut then
local ui = loadstring(game:HttpGet("https://raw.githubusercontent.com/Daffy734/code/refs/heads/main/yep"))()

local win = ui:Create({
    Name = "Celeron's GUI (SAKTK: Juggernaut)",
    ThemeColor = Color3.fromRGB(20, 20, 20),
    StartupSound = "rbxassetid://6958727243",
    ThemeFont = Enum.Font.FredokaOne
})

local maintab = win:Tab("Main")
local esptab = win:Tab("Visual")
local guntab = win:Tab("Weapon")
local misctab = win:Tab("Others")
local helptab = win:Tab("Info")

maintab:Label("Script Made By Celeron + Daffy!")
misctab:Label("Other Features.")
helptab:Label("GUI Controls Are Below, Script Credits Are At The Bottom!")
helptab:Label("Show / Hide GUI: Right Alt")

local runService = game:GetService("RunService")
local players = game:GetService("Players")
local player = players.LocalPlayer

local currentConnection = nil

function applyEmulatedSpeed(speed)
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	local rootPart = character:WaitForChild("HumanoidRootPart")

	if currentConnection then currentConnection:Disconnect() end

	currentConnection = runService.RenderStepped:Connect(function(dt)
		if not character or not character.Parent or humanoid.Health <= 0 then
			currentConnection:Disconnect()
			currentConnection = nil
			return
		end

		local moveDir = humanoid.MoveDirection
		if moveDir.Magnitude > 0 then
			local horizontalVelocity = Vector3.new(moveDir.X, 0, moveDir.Z).Unit * speed
			rootPart.Velocity = Vector3.new(horizontalVelocity.X, rootPart.Velocity.Y, horizontalVelocity.Z)
		end
	end)

	humanoid.Died:Connect(function()
		if currentConnection then currentConnection:Disconnect() end
		currentConnection = nil
	end)
end

maintab:Textbox("Player Speed", function(v)
	local speed = tonumber(v)
	if not speed then return end

	applyEmulatedSpeed(speed)

	game.Players.LocalPlayer.CharacterAdded:Connect(function()
		task.wait(0.25)
		applyEmulatedSpeed(speed)
	end)
end)

guntab:Label("Weapon Features.")

guntab:Textbox("Obtain Gun", function(v)
	local Players = game:GetService("Players")
	local Workspace = game:GetService("Workspace")

	local player = Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

	local function findGunModel(name)
		local weapons = Workspace:FindFirstChild("Weapons")
		if not weapons then return nil end
		for _, child in ipairs(weapons:GetChildren()) do
			if child:IsA("Model") and child.Name:lower() == name:lower() then
				return child
			end
		end
		return nil
	end

	local function setModelTransparency(model, value)
		for _, part in ipairs(model:GetDescendants()) do
			if part:IsA("BasePart") then
				part.Transparency = value
			end
		end
	end

	local function runGunSequence(gunModel)
		if not gunModel or not gunModel.PrimaryPart then return end

		local originalCFrame = gunModel.PrimaryPart.CFrame
		local targetCFrame = CFrame.new(humanoidRootPart.Position + Vector3.new(0, 2, 0))

		setModelTransparency(gunModel, 1)
		gunModel:SetPrimaryPartCFrame(targetCFrame)
		task.wait(0.15)
		gunModel:SetPrimaryPartCFrame(originalCFrame)
		setModelTransparency(gunModel, 0)
	end

	local gunModel = findGunModel(v)
	runGunSequence(gunModel)
end)

guntab:Button("Show Current Weapons", function()
local StarterGui = game:GetService("StarterGui")
local Workspace = game:GetService("Workspace")

local weaponsFolder = Workspace:FindFirstChild("Weapons")

local gunNames = {}

for _, obj in ipairs(weaponsFolder:GetChildren()) do
	if obj:IsA("Model") then
		table.insert(gunNames, obj.Name)
	end
end

local finalText = #gunNames > 0 and table.concat(gunNames, ", ") or "No guns found."

StarterGui:SetCore("SendNotification", {
	Title = "Current Weapons";
	Text = finalText;
	Duration = 10;
})
end)

local weaponESPEnabled = false
local activeESP = {}
local lastWeaponNames = {}
local currentRoot = nil

guntab:Toggle("Weapon ESP", function()
	weaponESPEnabled = not weaponESPEnabled

	local StarterGui = game:GetService("StarterGui")
	StarterGui:SetCore("SendNotification", {
		Title = "Weapon ESP",
		Text = weaponESPEnabled and "Enabled." or "Disabled.",
		Duration = 3
	})

	local player = game.Players.LocalPlayer
	local weaponsFolder = workspace:FindFirstChild("Weapons")
	if not weaponsFolder then return end

	local function clearESP()
		for _, gui in ipairs(activeESP) do
			if gui and gui:IsA("BillboardGui") then
				gui:Destroy()
			end
		end
		activeESP = {}
	end

	if not weaponESPEnabled then
		clearESP()
		return
	end

	local function updateRoot()
		local char = player.Character or player.CharacterAdded:Wait()
		local root = char:WaitForChild("HumanoidRootPart")
		currentRoot = root

		local humanoid = char:FindFirstChildOfClass("Humanoid")
		if humanoid then
			humanoid.Died:Connect(function()
				currentRoot = nil
				player.CharacterAdded:Wait():WaitForChild("HumanoidRootPart")
				task.wait(0.5)
				updateRoot()
				if weaponESPEnabled then
					createESP()
				end
			end)
		end

		root:GetPropertyChangedSignal("Parent"):Connect(function()
			if not root:IsDescendantOf(workspace) then
				task.wait(0.5)
				updateRoot()
			end
		end)
	end

	updateRoot()
	player.CharacterAdded:Connect(function()
		task.wait(0.5)
		updateRoot()
		if weaponESPEnabled then
			createESP()
		end
	end)

	local function createESP()
		clearESP()
		lastWeaponNames = {}
		for _, obj in ipairs(weaponsFolder:GetChildren()) do
			if obj:IsA("Model") then
				table.insert(lastWeaponNames, obj.Name)
				local part = obj:FindFirstChildWhichIsA("BasePart")
				if part then
					local gui = Instance.new("BillboardGui")
					gui.Size = UDim2.new(0, 100, 0, 30)
					gui.StudsOffset = Vector3.new(0, 3, 0)
					gui.AlwaysOnTop = true
					gui.Adornee = part
					gui.Parent = part

					local nameLabel = Instance.new("TextLabel")
					nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
					nameLabel.Position = UDim2.new(0, 0, 0, 0)
					nameLabel.BackgroundTransparency = 1
					nameLabel.TextColor3 = Color3.new(1, 1, 1)
					nameLabel.TextScaled = true
					nameLabel.Font = Enum.Font.Arial
					nameLabel.Text = obj.Name
					nameLabel.Parent = gui

					local distLabel = Instance.new("TextLabel")
					distLabel.Size = UDim2.new(1, 0, 0.5, 0)
					distLabel.Position = UDim2.new(0, 0, 0.5, 0)
					distLabel.BackgroundTransparency = 1
					distLabel.TextColor3 = Color3.new(0.8, 0.8, 0.8)
					distLabel.TextScaled = true
					distLabel.Font = Enum.Font.Code
					distLabel.Text = "..."
					distLabel.Parent = gui

					table.insert(activeESP, gui)

					task.spawn(function()
						while gui.Parent and weaponESPEnabled do
							if currentRoot then
								local dist = (part.Position - currentRoot.Position).Magnitude
								distLabel.Text = math.floor(dist) .. " studs"
							end
							task.wait()
						end
					end)
				end
			end
		end
	end

	local function weaponsChanged()
		local currentNames = {}
		for _, obj in ipairs(weaponsFolder:GetChildren()) do
			if obj:IsA("Model") then
				table.insert(currentNames, obj.Name)
			end
		end
		if #currentNames ~= #lastWeaponNames then return true end
		for i, name in ipairs(currentNames) do
			if name ~= lastWeaponNames[i] then return true end
		end
		return false
	end

	task.spawn(function()
		while true do
			if weaponESPEnabled and weaponsChanged() then
				createESP()
			end
			task.wait(3)
		end
	end)

	createESP()
end)

maintab:Label("Aimlock Features.")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer
local cam = workspace.CurrentCamera

local silentAimEnabled = false
local fovCircle
local conn
local addConn
local removeConn
local killersFolder = workspace:FindFirstChild("Killers")
local killersList = {}

local function notify(state)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = "Silent Aim",
            Text = state and "Enabled." or "Disabled.",
            Duration = 3
        })
    end)
end

local function isOnScreenAndInFOV(pos)
    local screenPos, onScreen = cam:WorldToViewportPoint(pos)
    if not onScreen then return false end
    local center = Vector2.new(cam.ViewportSize.X/2, cam.ViewportSize.Y/2)
    local dist = (Vector2.new(screenPos.X, screenPos.Y) - center).Magnitude
    return dist <= fovCircle.Radius
end

local function isVisible(model)
    local origin = cam.CFrame.Position
    local raycastParams = RaycastParams.new()
    raycastParams.FilterDescendantsInstances = {player.Character, model}
    raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
    for _, part in ipairs(model:GetChildren()) do
        if part:IsA("BasePart") then
            local direction = (part.Position - origin)
            local result = workspace:Raycast(origin, direction, raycastParams)
            if not result then
                return true
            end
        end
    end
    return false
end

local function hasWelds(part)
    for _, child in ipairs(part:GetDescendants()) do
        if child:IsA("Weld") or child:IsA("WeldConstraint") then
            return true
        end
    end
    return false
end

local function refreshKillers()
    killersList = {}
    if killersFolder then
        for _, model in ipairs(killersFolder:GetChildren()) do
            if model:IsA("Model") and model:FindFirstChildOfClass("Humanoid") then
                table.insert(killersList, model)
            end
        end
    end
end

local function toggleSilentAim()
    silentAimEnabled = not silentAimEnabled
    notify(silentAimEnabled)

    if silentAimEnabled then
        if not fovCircle then
            fovCircle = Drawing.new("Circle")
            fovCircle.Radius = 145
            fovCircle.Position = Vector2.new(cam.ViewportSize.X/2, cam.ViewportSize.Y/2)
            fovCircle.Color = Color3.fromRGB(175,0,175)
            fovCircle.Thickness = 2
            fovCircle.Filled = false
            fovCircle.Visible = true
        else
            fovCircle.Visible = true
        end

        refreshKillers()

        if killersFolder then
            addConn = killersFolder.ChildAdded:Connect(function(child)
                if child:IsA("Model") and child:FindFirstChildOfClass("Humanoid") then
                    table.insert(killersList, child)
                end
            end)
            removeConn = killersFolder.ChildRemoved:Connect(function(child)
                for i, model in ipairs(killersList) do
                    if model == child then
                        table.remove(killersList, i)
                        break
                    end
                end
            end)
        end

        conn = workspace.ChildAdded:Connect(function(obj)
            if not silentAimEnabled then return end
            if obj:IsA("Part") and obj.Name == "Bullet" then
                -- skip if bullet has welds
                if hasWelds(obj) then return end
                for _, model in ipairs(killersList) do
                    local head = model:FindFirstChild("Head")
                    local torso = model:FindFirstChild("HumanoidRootPart")
                    local hum = model:FindFirstChildOfClass("Humanoid")
                    if hum and hum.Health > 0 and (head or torso) then
                        local targetPart = head
                        if math.random(1,2) == 1 and torso then
                            targetPart = torso
                        end
                        if isOnScreenAndInFOV(targetPart.Position) and isVisible(model) then
                            obj.CFrame = targetPart.CFrame
                            break
                        end
                    end
                end
            end
        end)
    else
        if fovCircle then fovCircle.Visible = false end
        if conn then conn:Disconnect() conn = nil end
        if addConn then addConn:Disconnect() addConn = nil end
        if removeConn then removeConn:Disconnect() removeConn = nil end
        killersList = {}
    end
end

maintab:Toggle("Silent Aim", function()
    toggleSilentAim()
end)

players = game:GetService("Players")
runService = game:GetService("RunService")
input = game:GetService("UserInputService")
gui = game:GetService("StarterGui")
player = players.LocalPlayer
camera = workspace.CurrentCamera

getgenv().aimlockEnabled = false
getgenv().bindEnabled = false

aimConnection = nil
target = nil
bindConnection = nil

function notifyy(text)
	pcall(function()
		gui:SetCore("SendNotification", {Title = "Aimlock", Text = text, Duration = 2})
	end)
end

function getNearestTarget()
	local killers = workspace:FindFirstChild("Killers")
	if not killers then return end
	local character = player.Character
	if not character or not character:FindFirstChild("HumanoidRootPart") then return end
	local origin = character.HumanoidRootPart.Position
	local closest = nil
	local shortest = math.huge

	local nonZombies = {}
	local zombies = {}

	for _, model in ipairs(killers:GetChildren()) do
		if model:IsA("Model") then
			local humanoid = model:FindFirstChildOfClass("Humanoid")
			local root = model:FindFirstChild("HumanoidRootPart") or model:FindFirstChild("UpperTorso") or model.PrimaryPart
			if humanoid and root then
				local distance = (root.Position - origin).Magnitude
				if model.Name == "Zombie" then
					table.insert(zombies, {model = model, dist = distance})
				else
					table.insert(nonZombies, {model = model, dist = distance})
				end
			end
		end
	end

	if #nonZombies > 0 then
		for _, entry in ipairs(nonZombies) do
			if entry.dist < shortest then
				shortest = entry.dist
				closest = entry.model
			end
		end
	elseif #zombies == 1 then
		closest = zombies[1].model
	end

	return closest
end

function aimAtTarget()
	if not getgenv().aimlockEnabled or not target then return end
	local part = target:FindFirstChild("HumanoidRootPart") or target:FindFirstChild("UpperTorso") or target.PrimaryPart
	if not part then return end
	local goal = part.Position
	local origin = camera.CFrame.Position
	camera.CFrame = CFrame.new(origin, origin + (goal - origin).Unit)
end

function toggleAimlock()
	getgenv().aimlockEnabled = not getgenv().aimlockEnabled
	if getgenv().aimlockEnabled then
		target = getNearestTarget()
		if target then
			if not aimConnection then aimConnection = runService.RenderStepped:Connect(aimAtTarget) end
			notifyy("Enabled.")
		else
			getgenv().aimlockEnabled = false
			notifyy("Disabled.")
		end
	else
		if aimConnection then aimConnection:Disconnect() aimConnection = nil end
		target = nil
		notifyy("Disabled.")
	end
end

maintab:Toggle("Aimlock", function()
	toggleAimlock()
end)

maintab:Toggle("Aimlock (Bind: M2)", function()
	getgenv().bindEnabled = not getgenv().bindEnabled
	if getgenv().bindEnabled then
		if not bindConnection then
			bindConnection = input.InputBegan:Connect(function(key, processed)
				if processed then return end
				if key.UserInputType == Enum.UserInputType.MouseButton2 then
					toggleAimlock()
				end
			end)
			notifyy("Keybind Enabled.")
		end
	else
		if bindConnection then
			bindConnection:Disconnect()
			bindConnection = nil
			notifyy("Keybind Disabled.")
		end
	end
end)

esptab:Label("Visual Features.")

local juggernautESPEnabled = false
local juggernautESPObjects = {}
local rs = game:GetService("RunService")
local cam = workspace.CurrentCamera
local renderConnection = nil

local killersFolder = workspace:FindFirstChild("Killers")

local function createHeadESP(model)
    local highlight = Instance.new("Highlight")
    highlight.Name = "JuggernautHighlightESP"
    highlight.FillTransparency = 0.7
    highlight.OutlineColor = Color3.fromRGB(255, 50, 50)
    highlight.OutlineTransparency = 0
    highlight.Adornee = model
    highlight.Parent = model

    local healthBG = Drawing.new("Square")
    healthBG.Filled = true
    healthBG.Color = Color3.fromRGB(0,0,0)
    healthBG.Transparency = 0.6

    local healthBar = Drawing.new("Square")
    healthBar.Filled = true
    healthBar.Color = Color3.fromRGB(0,255,0)
    healthBar.Transparency = 0.9

    local nameTag = Drawing.new("Text")
    nameTag.Size = 16
    nameTag.Center = true
    nameTag.Color = Color3.fromRGB(255,255,255)
    nameTag.Outline = true

    juggernautESPObjects[model] = {
        highlight=highlight,
        healthBG=healthBG,
        healthBar=healthBar,
        nameTag=nameTag
    }
end

local function removeHeadESP(model)
    if juggernautESPObjects[model] then
        juggernautESPObjects[model].highlight:Destroy()
        juggernautESPObjects[model].healthBG:Remove()
        juggernautESPObjects[model].healthBar:Remove()
        juggernautESPObjects[model].nameTag:Remove()
        juggernautESPObjects[model] = nil
    end
end

esptab:Toggle("Juggernaut ESP", function()
    juggernautESPEnabled = not juggernautESPEnabled
    if juggernautESPEnabled then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Juggernaut ESP",
            Text = "Enabled.",
            Duration = 2
        })

        if killersFolder then
            for _,model in pairs(killersFolder:GetChildren()) do
                if model:IsA("Model") then
                    createHeadESP(model)
                end
            end

            killersFolder.ChildAdded:Connect(function(child)
                if juggernautESPEnabled and child:IsA("Model") then
                    createHeadESP(child)
                end
            end)

            killersFolder.ChildRemoved:Connect(function(child)
                removeHeadESP(child)
            end)
        end

        renderConnection = rs.RenderStepped:Connect(function()
            for model,objs in pairs(juggernautESPObjects) do
                local head = model:FindFirstChild("Head")
                local hum = model:FindFirstChildOfClass("Humanoid")
                if juggernautESPEnabled and head and hum then
                    local headPos,onScreen = cam:WorldToViewportPoint(head.Position)
                    local topPos = cam:WorldToViewportPoint(head.Position + Vector3.new(0, head.Size.Y/2 + 0.5, 0))
                    if onScreen then
                        local barWidth = 60
                        local barHeight = 6
                        local hpPercent = math.clamp(hum.Health/hum.MaxHealth,0,1)
                        local barY = topPos.Y - 10

                        objs.healthBG.Visible = true
                        objs.healthBG.Size = Vector2.new(barWidth, barHeight)
                        objs.healthBG.Position = Vector2.new(headPos.X - barWidth/2, barY)

                        objs.healthBar.Visible = true
                        objs.healthBar.Size = Vector2.new(barWidth*hpPercent, barHeight)
                        objs.healthBar.Position = Vector2.new(headPos.X - barWidth/2, barY)

                        objs.nameTag.Visible = true
                        objs.nameTag.Text = model.Name
                        objs.nameTag.Position = Vector2.new(headPos.X, barY - 18)
                    else
                        objs.healthBG.Visible = false
                        objs.healthBar.Visible = false
                        objs.nameTag.Visible = false
                    end
                else
                    objs.healthBG.Visible = false
                    objs.healthBar.Visible = false
                    objs.nameTag.Visible = false
                end
            end
        end)
    else
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Juggernaut ESP",
            Text = "Disabled.",
            Duration = 2
        })
        if renderConnection then
            renderConnection:Disconnect()
            renderConnection = nil
        end
        for model,objs in pairs(juggernautESPObjects) do
            objs.highlight:Destroy()
            objs.healthBG:Remove()
            objs.healthBar:Remove()
            objs.nameTag:Remove()
        end
        juggernautESPObjects = {}
    end
end)

local healthBarsEnabled = false
local healthBarConnection = nil

esptab:Toggle("Juggernaut Health Bar", function()
    healthBarsEnabled = not healthBarsEnabled
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local screenGui = player:WaitForChild("PlayerGui"):FindFirstChild("jugghealthbars")
    if not screenGui then
        screenGui = Instance.new("ScreenGui")
        screenGui.Name = "jugghealthbars"
        screenGui.ResetOnSpawn = false
        screenGui.Parent = player:WaitForChild("PlayerGui")
    end

    local function clearBars()
        for _,child in ipairs(screenGui:GetChildren()) do
            if child:IsA("Frame") then
                child:Destroy()
            end
        end
    end

    if healthBarsEnabled then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Juggernaut Health Bar",
            Text = "Enabled.",
            Duration = 2
        })

        local function createHealthBar(plr, model)
            local humanoid = model:FindFirstChildOfClass("Humanoid")
            if not humanoid then return end
            if screenGui:FindFirstChild(plr.Name .. "_Bar") then return end

            local frame = Instance.new("Frame")
            frame.Name = plr.Name .. "_Bar"
            frame.Size = UDim2.new(0.4, 0, 0, 28)
            frame.Position = UDim2.new(0.3, 0, 0.08, 0)
            frame.BackgroundColor3 = Color3.fromRGB(0,0,0)
            frame.BorderSizePixel = 2
            frame.Parent = screenGui

            local fillHolder = Instance.new("Frame")
            fillHolder.Size = UDim2.new(1, -4, 1, -4)
            fillHolder.Position = UDim2.new(0, 2, 0, 2)
            fillHolder.BackgroundColor3 = Color3.fromRGB(40,40,40)
            fillHolder.BorderSizePixel = 0
            fillHolder.Parent = frame

            local fill = Instance.new("Frame")
            fill.Name = "health"
            fill.Size = UDim2.new(1, 0, 1, 0)
            fill.BackgroundColor3 = Color3.fromRGB(255,0,0)
            fill.BorderSizePixel = 0
            fill.Parent = fillHolder

            local gradient = Instance.new("UIGradient")
            gradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Color3.fromRGB(0,0,0)),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(255,0,0))
            }
            gradient.Rotation = 0
            gradient.Parent = fill

            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1, 0, 1, 0)
            label.BackgroundTransparency = 1
            label.TextColor3 = Color3.fromRGB(255,255,255)
            label.TextScaled = true
            label.Font = Enum.Font.GothamBold
            label.Text = plr.DisplayName .. " - " .. math.floor(humanoid.Health) .. " / " .. math.floor(humanoid.MaxHealth)
            label.Parent = frame

            task.spawn(function()
                while healthBarsEnabled and humanoid and humanoid.Parent and humanoid.Health > 0 do
                    local ratio = humanoid.Health / humanoid.MaxHealth
                    fill.Size = UDim2.new(ratio, 0, 1, 0)
                    label.Text = plr.DisplayName .. " - " .. math.floor(humanoid.Health) .. " / " .. math.floor(humanoid.MaxHealth)
                    task.wait(0.2)
                end
                frame:Destroy()
            end)
        end

        healthBarConnection = task.spawn(function()
            while healthBarsEnabled do
                local killersFolder = workspace:FindFirstChild("Killers")
                if killersFolder then
                    for _, model in ipairs(killersFolder:GetChildren()) do
                        if model:IsA("Model") then
                            for _,plr in ipairs(Players:GetPlayers()) do
                                if plr.Character == model then
                                    createHealthBar(plr, model)
                                end
                            end
                        end
                    end
                end
                task.wait(1)
            end
        end)
    else
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Juggernaut Health Bar",
            Text = "Disabled.",
            Duration = 2
        })
        clearBars()
    end
end)

maintab:Label("Auto Win Features.")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer

local active = false
local conn
local clickLoop

local function notify(state)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = "Survivor Auto-Win",
			Text = state and "Enabled." or "Disabled.",
			Duration = 4
		})
	end)
end

local function getFirstRealPlayerInKillers()
	local killers = workspace:FindFirstChild("Killers")
	if not killers then return end
	for _, model in ipairs(killers:GetChildren()) do
		if Players:GetPlayerFromCharacter(model) then
			return model
		end
	end
end

local function equipM1911()
	local backpack = player:FindFirstChildOfClass("Backpack")
	if not backpack then return end
	local tool = backpack:FindFirstChild("M1911")
	if tool then
		player.Character:FindFirstChildOfClass("Humanoid"):EquipTool(tool)
	end
end

local function teleportToStart()
	local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
	if root then
		root.CFrame = CFrame.new(112, 335, 62)
	end
end

local function disableAutoWin()
	active = false
	if conn then conn:Disconnect() conn = nil end
	if clickLoop then clickLoop = nil end
	notify(false)
end

maintab:Toggle("Survivor Auto-Win (Bannable.)", function()
	active = not active
	if conn then conn:Disconnect() conn = nil end
	if clickLoop then clickLoop = nil end
	notify(active)

	if not active then return end

	teleportToStart()
	equipM1911()

	local target = getFirstRealPlayerInKillers()
	if not target then return disableAutoWin() end

	local targetHumanoid = target:FindFirstChildOfClass("Humanoid")
	local targetHead = target:FindFirstChild("Head")
	local myHumanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
	if not targetHumanoid or not targetHead or not myHumanoid then return disableAutoWin() end

	conn = RunService.Heartbeat:Connect(function()
		if not target or not target.Parent or not targetHumanoid.Parent or not targetHead.Parent then
			disableAutoWin()
			return
		end
		if targetHumanoid.Health <= 0 or myHumanoid.Health <= 0 then
			disableAutoWin()
			return
		end

		for _, obj in ipairs(workspace:GetChildren()) do
			if obj:IsA("Part")
				and obj.Name == "Bullet"
				and not obj.Anchored
				and obj.Locked == false
				and obj:IsDescendantOf(workspace)
				and obj.Parent == workspace then

				obj.CFrame = targetHead.CFrame
			end
		end
	end)

	clickLoop = task.spawn(function()
		while active and targetHumanoid and targetHumanoid.Parent and myHumanoid and myHumanoid.Health > 0 do
			if targetHumanoid.Health <= 0 then break end
			VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
			VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
			task.wait(0.09)
		end
		disableAutoWin()
	end)
end)

maintab:Toggle("Juggernaut Auto-Win (Bannable.)", function()
	local Players = game:GetService("Players")
	local Workspace = game:GetService("Workspace")
	local StarterGui = game:GetService("StarterGui")

	local LocalPlayer = Players.LocalPlayer
	local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local localRoot = character:WaitForChild("HumanoidRootPart")

	_G.LoopKillEnabled = not _G.LoopKillEnabled
	local visited = {}
	local running = false

	local function isDead(player)
		local char = player.Character
		local hum = char and char:FindFirstChildOfClass("Humanoid")
		return not (hum and hum.Health > 0)
	end

	local function teleportTo(player)
		local targetChar = player.Character
		local targetRoot = targetChar and targetChar:FindFirstChild("HumanoidRootPart")
		if localRoot and targetRoot then
			localRoot.CFrame = targetRoot.CFrame + Vector3.new(2, 0, 0)
		end
	end

	local function sendNotification(state)
		StarterGui:SetCore("SendNotification", {
			Title = "Juggernaut Kill";
			Text = state and "Enabled." or "Disabled.";
			Duration = 5;
		})
	end

	local function startLoopKill()
		if running then return end
		running = true
		visited = {}
		sendNotification(true)

		task.spawn(function()
			while _G.LoopKillEnabled do
				for _, player in ipairs(Players:GetPlayers()) do
					if player ~= LocalPlayer and not visited[player] then
						repeat
							if not _G.LoopKillEnabled then
								running = false
								visited = {}
								sendNotification(false)
								return
							end

							if isDead(player) then
								visited[player] = true
							else
								teleportTo(player)
							end
							task.wait(0.05)
						until visited[player]
					end
				end

				if #Players:GetPlayers() - 1 == #visited then
					running = false
					sendNotification(false)
					break
				end

				task.wait(1)
			end

			running = false
			visited = {}
			sendNotification(false)
		end)
	end

	if _G.LoopKillEnabled then
		startLoopKill()
	else
		sendNotification(false)
	end
end)

misctab:Button("Infinite Yield", function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

misctab:Button("Switch Servers", function()
    local servers = {}
    local req = game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true")
    local body = HttpService:JSONDecode(req)

    if body and body.data then
        for i, v in next, body.data do
            if type(v) == "table" and tonumber(v.playing) and tonumber(v.maxPlayers) and v.playing < v.maxPlayers and v.id ~= JobId then
                table.insert(servers, 1, v.id)
            end
        end
    end

    if #servers > 0 then
        TeleportService:TeleportToPlaceInstance(PlaceId, servers[math.random(1, #servers)], Players.LocalPlayer)
end
end)

guntab:Label("Gun Mods.")
local runService = game:GetService("RunService")
local players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local player = players.LocalPlayer

local model = workspace:WaitForChild("AREA51"):WaitForChild("PlantRoom"):WaitForChild("Box of Shells")
local box = model:WaitForChild("Box")
local originalCFrame = box.CFrame
local loopConnection
local infiniteAmmoEnabled = false

local function notifyy(title, text)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = title,
			Text = text,
			Duration = 3
		})
	end)
end

local function ghostifyModel()
	for _, item in ipairs(model:GetDescendants()) do
		if item:IsA("BasePart") then
			item.Transparency = 1
			item.CanCollide = false
		elseif item:IsA("Decal") or item:IsA("SurfaceGui") then
			item.Transparency = 1
		end
	end
end

local function enableInfiniteAmmo()
	infiniteAmmoEnabled = true
	notifyy("Infinite Ammo", "Enabled.")
	ghostifyModel()
	box.Anchored = true
	box.CanCollide = false

	local toggle = false
	local lastToggle = 0

	loopConnection = runService.RenderStepped:Connect(function(dt)
		local char = player.Character
		if not char then return end

		local root = char:FindFirstChild("HumanoidRootPart")
		if not root then return end

		lastToggle += dt
		if lastToggle >= 0.5 then
			lastToggle = 0
			toggle = not toggle

			if toggle then
				local offset = Vector3.new(0, -(root.Size.Y / 2 + box.Size.Y / 2 + 0.1), 0)
				local position = root.Position + offset
				box.CFrame = CFrame.new(position)
			else
				box.CFrame = originalCFrame
			end
		end
	end)
end

local function disableInfiniteAmmo()
	infiniteAmmoEnabled = false
	notifyy("Infinite Ammo", "Disabled.")
	if loopConnection then
		loopConnection:Disconnect()
		loopConnection = nil
	end
	box.CFrame = originalCFrame
end

guntab:Toggle("Infinite Ammo", function()
	if infiniteAmmoEnabled then
		disableInfiniteAmmo()
	else
		enableInfiniteAmmo()
	end
end)

local players = game:GetService("Players")
local userInput = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local player = players.LocalPlayer

local model = workspace:WaitForChild("AREA51"):WaitForChild("PlantRoom"):WaitForChild("Box of Shells")
local box = model:WaitForChild("Box")
local originalCFrame = box.CFrame
local fullAmmoConnection
local fullAmmoBindEnabled = false

local function notifyFullAmmo(title, text)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = title,
			Text = text,
			Duration = 3
		})
	end)
end

local function ghostifyModel()
	for _, item in ipairs(model:GetDescendants()) do
		if item:IsA("BasePart") then
			item.Transparency = 1
			item.CanCollide = false
		elseif item:IsA("Decal") or item:IsA("SurfaceGui") then
			item.Transparency = 1
		end
	end
end

local function unghostifyModel()
	for _, item in ipairs(model:GetDescendants()) do
		if item:IsA("BasePart") then
			item.Transparency = 0
			item.CanCollide = true
		elseif item:IsA("Decal") or item:IsA("SurfaceGui") then
			item.Transparency = 0
		end
	end
end

local function handleFullAmmoKey(input, gp)
	if gp or input.KeyCode ~= Enum.KeyCode.X then return end

	local char = player.Character
	if not char then return end
	local root = char:FindFirstChild("HumanoidRootPart")
	if not root then return end

	local offset = Vector3.new(0, -(root.Size.Y / 2 + box.Size.Y / 2 + 0.1), 0)
	local position = root.Position + offset

	ghostifyModel()
	box.CFrame = CFrame.new(position)
	task.wait(0.1)
	box.CFrame = originalCFrame
	unghostifyModel()
end

local function enableFullAmmoBind()
	fullAmmoBindEnabled = true
	box.Anchored = true
	box.CanCollide = false
	fullAmmoConnection = userInput.InputBegan:Connect(handleFullAmmoKey)
	notifyFullAmmo("Full Ammo", "Keybind Enabled.")
end

local function disableFullAmmoBind()
	fullAmmoBindEnabled = false
	if fullAmmoConnection then
		fullAmmoConnection:Disconnect()
		fullAmmoConnection = nil
	end
	box.CFrame = originalCFrame
	unghostifyModel()
	notifyFullAmmo("Full Ammo", "Keybind Disabled.")
end

guntab:Button("Full Ammo (Bind: X)", function()
	if fullAmmoBindEnabled then
		disableFullAmmoBind()
	else
		enableFullAmmoBind()
	end
end)

helptab:Button("Copy Owner Discord Username", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Username",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("ghostofcelleron")
end)

helptab:Button("Copy Discord Server Invite", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Invite",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("https://discord.gg/8stFYxJv4R")
end)

elseif game.PlaceId == infection then
local ui = loadstring(game:HttpGet("https://raw.githubusercontent.com/Daffy734/code/refs/heads/main/yep"))()

local win = ui:Create({
    Name = "Celeron's GUI (SAKTK: Infection)",
    ThemeColor = Color3.fromRGB(20, 20, 20),
    StartupSound = "rbxassetid://6958727243",
    ThemeFont = Enum.Font.FredokaOne
})

local maintab = win:Tab("Main")
local esptab = win:Tab("Visual")
local guntab = win:Tab("Weapon")
local misctab = win:Tab("Others")
local helptab = win:Tab("Info")

maintab:Label("Script Made By Celeron + Daffy!")
maintab:Label("THIS MODE CARRYS A HIGHER BAN RISK, USE WITH DISCRETION.")
misctab:Label("Other Features.")
helptab:Label("GUI Controls Are Below, Script Credits Are At The Bottom!")
helptab:Label("Show / Hide GUI: Right Alt")

local runService = game:GetService("RunService")
local players = game:GetService("Players")
local player = players.LocalPlayer

local currentConnection = nil

function applyEmulatedSpeed(speed)
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	local rootPart = character:WaitForChild("HumanoidRootPart")

	if currentConnection then currentConnection:Disconnect() end

	currentConnection = runService.RenderStepped:Connect(function(dt)
		if not character or not character.Parent or humanoid.Health <= 0 then
			currentConnection:Disconnect()
			currentConnection = nil
			return
		end

		local moveDir = humanoid.MoveDirection
		if moveDir.Magnitude > 0 then
			local horizontalVelocity = Vector3.new(moveDir.X, 0, moveDir.Z).Unit * speed
			rootPart.Velocity = Vector3.new(horizontalVelocity.X, rootPart.Velocity.Y, horizontalVelocity.Z)
		end
	end)

	humanoid.Died:Connect(function()
		if currentConnection then currentConnection:Disconnect() end
		currentConnection = nil
	end)
end

maintab:Textbox("Player Speed", function(v)
	local speed = tonumber(v)
	if not speed then return end

	applyEmulatedSpeed(speed)

	game.Players.LocalPlayer.CharacterAdded:Connect(function()
		task.wait(0.25)
		applyEmulatedSpeed(speed)
	end)
end)

guntab:Label("Weapon Features.")

guntab:Textbox("Obtain Gun", function(v)
	local Players = game:GetService("Players")
	local Workspace = game:GetService("Workspace")

	local player = Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

	local function findGunModel(name)
		local weapons = Workspace:FindFirstChild("Weapons")
		if not weapons then return nil end
		for _, child in ipairs(weapons:GetChildren()) do
			if child:IsA("Model") and child.Name:lower() == name:lower() then
				return child
			end
		end
		return nil
	end

	local function setModelTransparency(model, value)
		for _, part in ipairs(model:GetDescendants()) do
			if part:IsA("BasePart") then
				part.Transparency = value
			end
		end
	end

	local function runGunSequence(gunModel)
		if not gunModel or not gunModel.PrimaryPart then return end

		local originalCFrame = gunModel.PrimaryPart.CFrame
		local targetCFrame = CFrame.new(humanoidRootPart.Position + Vector3.new(0, 2, 0))

		setModelTransparency(gunModel, 1)
		gunModel:SetPrimaryPartCFrame(targetCFrame)
		task.wait(0.15)
		gunModel:SetPrimaryPartCFrame(originalCFrame)
		setModelTransparency(gunModel, 0)
	end

	local gunModel = findGunModel(v)
	runGunSequence(gunModel)
end)

guntab:Button("Show Current Weapons", function()
local StarterGui = game:GetService("StarterGui")
local Workspace = game:GetService("Workspace")

local weaponsFolder = Workspace:FindFirstChild("Weapons")

local gunNames = {}

for _, obj in ipairs(weaponsFolder:GetChildren()) do
	if obj:IsA("Model") then
		table.insert(gunNames, obj.Name)
	end
end

local finalText = #gunNames > 0 and table.concat(gunNames, ", ") or "No guns found."

StarterGui:SetCore("SendNotification", {
	Title = "Current Weapons";
	Text = finalText;
	Duration = 10;
})
end)

local weaponESPEnabled = false
local activeESP = {}
local lastWeaponNames = {}
local currentRoot = nil

guntab:Toggle("Weapon ESP", function()
	weaponESPEnabled = not weaponESPEnabled

	local StarterGui = game:GetService("StarterGui")
	StarterGui:SetCore("SendNotification", {
		Title = "Weapon ESP",
		Text = weaponESPEnabled and "Enabled." or "Disabled.",
		Duration = 3
	})

	local player = game.Players.LocalPlayer
	local weaponsFolder = workspace:FindFirstChild("Weapons")
	if not weaponsFolder then return end

	local function clearESP()
		for _, gui in ipairs(activeESP) do
			if gui and gui:IsA("BillboardGui") then
				gui:Destroy()
			end
		end
		activeESP = {}
	end

	if not weaponESPEnabled then
		clearESP()
		return
	end

	local function updateRoot()
		local char = player.Character or player.CharacterAdded:Wait()
		local root = char:WaitForChild("HumanoidRootPart")
		currentRoot = root

		local humanoid = char:FindFirstChildOfClass("Humanoid")
		if humanoid then
			humanoid.Died:Connect(function()
				currentRoot = nil
				player.CharacterAdded:Wait():WaitForChild("HumanoidRootPart")
				task.wait(0.5)
				updateRoot()
				if weaponESPEnabled then
					createESP()
				end
			end)
		end

		root:GetPropertyChangedSignal("Parent"):Connect(function()
			if not root:IsDescendantOf(workspace) then
				task.wait(0.5)
				updateRoot()
			end
		end)
	end

	updateRoot()
	player.CharacterAdded:Connect(function()
		task.wait(0.5)
		updateRoot()
		if weaponESPEnabled then
			createESP()
		end
	end)

	local function createESP()
		clearESP()
		lastWeaponNames = {}
		for _, obj in ipairs(weaponsFolder:GetChildren()) do
			if obj:IsA("Model") then
				table.insert(lastWeaponNames, obj.Name)
				local part = obj:FindFirstChildWhichIsA("BasePart")
				if part then
					local gui = Instance.new("BillboardGui")
					gui.Size = UDim2.new(0, 100, 0, 30)
					gui.StudsOffset = Vector3.new(0, 3, 0)
					gui.AlwaysOnTop = true
					gui.Adornee = part
					gui.Parent = part

					local nameLabel = Instance.new("TextLabel")
					nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
					nameLabel.Position = UDim2.new(0, 0, 0, 0)
					nameLabel.BackgroundTransparency = 1
					nameLabel.TextColor3 = Color3.new(1, 1, 1)
					nameLabel.TextScaled = true
					nameLabel.Font = Enum.Font.Arial
					nameLabel.Text = obj.Name
					nameLabel.Parent = gui

					local distLabel = Instance.new("TextLabel")
					distLabel.Size = UDim2.new(1, 0, 0.5, 0)
					distLabel.Position = UDim2.new(0, 0, 0.5, 0)
					distLabel.BackgroundTransparency = 1
					distLabel.TextColor3 = Color3.new(0.8, 0.8, 0.8)
					distLabel.TextScaled = true
					distLabel.Font = Enum.Font.Code
					distLabel.Text = "..."
					distLabel.Parent = gui

					table.insert(activeESP, gui)

					task.spawn(function()
						while gui.Parent and weaponESPEnabled do
							if currentRoot then
								local dist = (part.Position - currentRoot.Position).Magnitude
								distLabel.Text = math.floor(dist) .. " studs"
							end
							task.wait()
						end
					end)
				end
			end
		end
	end

	local function weaponsChanged()
		local currentNames = {}
		for _, obj in ipairs(weaponsFolder:GetChildren()) do
			if obj:IsA("Model") then
				table.insert(currentNames, obj.Name)
			end
		end
		if #currentNames ~= #lastWeaponNames then return true end
		for i, name in ipairs(currentNames) do
			if name ~= lastWeaponNames[i] then return true end
		end
		return false
	end

	task.spawn(function()
		while true do
			if weaponESPEnabled and weaponsChanged() then
				createESP()
			end
			task.wait(3)
		end
	end)

	createESP()
end)

maintab:Label("Aimlock Features.")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer
local cam = workspace.CurrentCamera

local silentAimEnabled = false
local fovCircle
local conn
local addConn
local removeConn
local killersFolder = workspace:FindFirstChild("Killers")
local killersList = {}

local function notify(state)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = "Silent Aim",
            Text = state and "Enabled." or "Disabled.",
            Duration = 3
        })
    end)
end

local function isOnScreenAndInFOV(pos)
    local screenPos, onScreen = cam:WorldToViewportPoint(pos)
    if not onScreen then return false end
    local center = Vector2.new(cam.ViewportSize.X/2, cam.ViewportSize.Y/2)
    local dist = (Vector2.new(screenPos.X, screenPos.Y) - center).Magnitude
    return dist <= fovCircle.Radius
end

local function isVisible(model)
    local origin = cam.CFrame.Position
    local raycastParams = RaycastParams.new()
    raycastParams.FilterDescendantsInstances = {player.Character, model}
    raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
    for _, part in ipairs(model:GetChildren()) do
        if part:IsA("BasePart") then
            local direction = (part.Position - origin)
            local result = workspace:Raycast(origin, direction, raycastParams)
            if not result then
                return true
            end
        end
    end
    return false
end

local function hasWelds(part)
    for _, child in ipairs(part:GetDescendants()) do
        if child:IsA("Weld") or child:IsA("WeldConstraint") then
            return true
        end
    end
    return false
end

local function refreshKillers()
    killersList = {}
    if killersFolder then
        for _, model in ipairs(killersFolder:GetChildren()) do
            if model:IsA("Model") and model:FindFirstChildOfClass("Humanoid") then
                table.insert(killersList, model)
            end
        end
    end
end

local function toggleSilentAim()
    silentAimEnabled = not silentAimEnabled
    notify(silentAimEnabled)

    if silentAimEnabled then
        if not fovCircle then
            fovCircle = Drawing.new("Circle")
            fovCircle.Radius = 145
            fovCircle.Position = Vector2.new(cam.ViewportSize.X/2, cam.ViewportSize.Y/2)
            fovCircle.Color = Color3.fromRGB(175,0,175)
            fovCircle.Thickness = 2
            fovCircle.Filled = false
            fovCircle.Visible = true
        else
            fovCircle.Visible = true
        end

        refreshKillers()

        if killersFolder then
            addConn = killersFolder.ChildAdded:Connect(function(child)
                if child:IsA("Model") and child:FindFirstChildOfClass("Humanoid") then
                    table.insert(killersList, child)
                end
            end)
            removeConn = killersFolder.ChildRemoved:Connect(function(child)
                for i, model in ipairs(killersList) do
                    if model == child then
                        table.remove(killersList, i)
                        break
                    end
                end
            end)
        end

        conn = workspace.ChildAdded:Connect(function(obj)
            if not silentAimEnabled then return end
            if obj:IsA("Part") and obj.Name == "Bullet" then
                -- skip if bullet has welds
                if hasWelds(obj) then return end
                for _, model in ipairs(killersList) do
                    local head = model:FindFirstChild("Head")
                    local torso = model:FindFirstChild("HumanoidRootPart")
                    local hum = model:FindFirstChildOfClass("Humanoid")
                    if hum and hum.Health > 0 and (head or torso) then
                        local targetPart = head
                        if math.random(1,2) == 1 and torso then
                            targetPart = torso
                        end
                        if isOnScreenAndInFOV(targetPart.Position) and isVisible(model) then
                            obj.CFrame = targetPart.CFrame
                            break
                        end
                    end
                end
            end
        end)
    else
        if fovCircle then fovCircle.Visible = false end
        if conn then conn:Disconnect() conn = nil end
        if addConn then addConn:Disconnect() addConn = nil end
        if removeConn then removeConn:Disconnect() removeConn = nil end
        killersList = {}
    end
end

maintab:Toggle("Silent Aim", function()
    toggleSilentAim()
end)

local players = game:GetService("Players")
local runService = game:GetService("RunService")
local input = game:GetService("UserInputService")
local gui = game:GetService("StarterGui")
local player = players.LocalPlayer
local camera = workspace.CurrentCamera

getgenv().aimlockEnabled = false
getgenv().bindEnabled = false

local aimConnection = nil
local target = nil
local bindConnection = nil

local function notifyy(text)
	pcall(function()
		gui:SetCore("SendNotification", {Title = "Aimlock", Text = text, Duration = 2})
	end)
end

local function getNearestTarget()
	local killers = workspace:FindFirstChild("Killers")
	if not killers then return end
	local char = player.Character
	if not char or not char:FindFirstChild("HumanoidRootPart") then return end
	local origin = char.HumanoidRootPart.Position
	local closest, shortest = nil, math.huge

	for _, model in ipairs(killers:GetChildren()) do
		if model:IsA("Model") then
			local hum = model:FindFirstChildOfClass("Humanoid")
			local root = model:FindFirstChild("HumanoidRootPart") or model:FindFirstChild("UpperTorso") or model.PrimaryPart
			if hum and hum.Health > 0 and root then
				local dist = (root.Position - origin).Magnitude
				if dist < shortest then
					shortest = dist
					closest = model
				end
			end
		end
	end
	return closest
end

local function aimAtTarget()
	if not getgenv().aimlockEnabled then return end

	local valid = target and target:FindFirstChildOfClass("Humanoid") and target:FindFirstChildOfClass("Humanoid").Health > 0
	if not valid then
		local newTarget = getNearestTarget()
		if newTarget and newTarget ~= target then
			target = newTarget
			notifyy("Switched to: " .. target.Name)
		else
			target = nil
			return
		end
	end

	if not target then return end
	local part = target:FindFirstChild("HumanoidRootPart") or target:FindFirstChild("UpperTorso") or target.PrimaryPart
	if not part then return end
	camera.CFrame = CFrame.new(camera.CFrame.Position, part.Position)
end

local function toggleAimlock()
	getgenv().aimlockEnabled = not getgenv().aimlockEnabled
	if getgenv().aimlockEnabled then
		target = getNearestTarget()
		if target then
			if not aimConnection then aimConnection = runService.RenderStepped:Connect(aimAtTarget) end
			notifyy("Aimlock Enabled.")
		else
			getgenv().aimlockEnabled = false
			notifyy("No target. Disabled.")
		end
	else
		if aimConnection then aimConnection:Disconnect() aimConnection = nil end
		target = nil
		notifyy("Aimlock Disabled.")
	end
end

maintab:Toggle("Aimlock", function()
	toggleAimlock()
end)

maintab:Toggle("Aimlock (Bind: M2)", function()
	getgenv().bindEnabled = not getgenv().bindEnabled
	if getgenv().bindEnabled then
		if not bindConnection then
			bindConnection = input.InputBegan:Connect(function(key, processed)
				if processed then return end
				if key.UserInputType == Enum.UserInputType.MouseButton2 then
					toggleAimlock()
				end
			end)
			notifyy("Keybind Enabled.")
		end
	else
		if bindConnection then
			bindConnection:Disconnect()
			bindConnection = nil
			notifyy("Keybind Disabled.")
		end
	end
end)

esptab:Label("Visual Features.")

esptab:Toggle("Survivor ESP", function()
    local Workspace = game:GetService("Workspace")
    local RunService = game:GetService("RunService")
    local StarterGui = game:GetService("StarterGui")
    local cam = Workspace.CurrentCamera

    survivorESPEnabled = not survivorESPEnabled
    survivorESPObjects = survivorESPObjects or {}
    local renderConn, addConn, removeConn

    local function notify(state)
        pcall(function()
            StarterGui:SetCore("SendNotification", {
                Title = "Survivor ESP",
                Text = state and "Enabled." or "Disabled.",
                Duration = 3
            })
        end)
    end

    local function createESP(model)
        local oldHl = model:FindFirstChildOfClass("Highlight")
        if oldHl then oldHl:Destroy() end
        local hl = Instance.new("Highlight")
        hl.FillTransparency = 1
        hl.OutlineTransparency = 0
        hl.OutlineColor = Color3.fromRGB(0,255,0)
        hl.Adornee = model
        hl.Parent = model

        local healthBG = Drawing.new("Square")
        healthBG.Filled = true
        healthBG.Color = Color3.fromRGB(0,0,0)
        healthBG.Transparency = 0.6

        local healthBar = Drawing.new("Square")
        healthBar.Filled = true
        healthBar.Color = Color3.fromRGB(0,255,0)
        healthBar.Transparency = 0.9

        survivorESPObjects[model] = {
            highlight = hl,
            healthBG = healthBG,
            healthBar = healthBar
        }
    end

    local function removeESP(model)
        local objs = survivorESPObjects[model]
        if objs then
            if objs.highlight and objs.highlight.Parent then objs.highlight:Destroy() end
            if objs.healthBG then objs.healthBG:Remove() end
            if objs.healthBar then objs.healthBar:Remove() end
            survivorESPObjects[model] = nil
        end
        local stray = model:FindFirstChildOfClass("Highlight")
        if stray then stray:Destroy() end
    end

    local function removeAllESP()
        for model, objs in pairs(survivorESPObjects) do
            if objs.highlight and objs.highlight.Parent then objs.highlight:Destroy() end
            if objs.healthBG then objs.healthBG:Remove() end
            if objs.healthBar then objs.healthBar:Remove() end
        end
        survivorESPObjects = {}
        local folder = Workspace:FindFirstChild("Characters to kill")
        if folder then
            for _, child in ipairs(folder:GetChildren()) do
                local stray = child:FindFirstChildOfClass("Highlight")
                if stray then stray:Destroy() end
            end
        end
    end

    local function enableESP()
        notify(true)
        local folder = Workspace:FindFirstChild("Characters to kill")
        if not folder then return end
        for _, model in ipairs(folder:GetChildren()) do
            if model:IsA("Model") and model:FindFirstChildOfClass("Humanoid") then
                createESP(model)
            end
        end
        addConn = folder.ChildAdded:Connect(function(child)
            if survivorESPEnabled and child:IsA("Model") then
                local hum = child:FindFirstChildOfClass("Humanoid")
                if hum then createESP(child) end
                child.DescendantAdded:Connect(function(desc)
                    if survivorESPEnabled and desc:IsA("Humanoid") then
                        createESP(child)
                    end
                end)
            end
        end)
        removeConn = folder.ChildRemoved:Connect(function(child)
            removeESP(child)
        end)
        renderConn = RunService.RenderStepped:Connect(function()
            for model, objs in pairs(survivorESPObjects) do
                local head = model:FindFirstChild("Head")
                local hum = model:FindFirstChildOfClass("Humanoid")
                if survivorESPEnabled and head and hum then
                    local pos,onScreen = cam:WorldToViewportPoint(head.Position)
                    if onScreen then
                        local barWidth = 40
                        local barHeight = 4
                        local hpPercent = math.clamp(hum.Health/hum.MaxHealth,0,1)
                        local barY = pos.Y - 20
                        objs.healthBG.Visible = true
                        objs.healthBG.Size = Vector2.new(barWidth, barHeight)
                        objs.healthBG.Position = Vector2.new(pos.X - barWidth/2, barY)
                        objs.healthBar.Visible = true
                        objs.healthBar.Size = Vector2.new(barWidth*hpPercent, barHeight)
                        objs.healthBar.Position = Vector2.new(pos.X - barWidth/2, barY)
                    else
                        objs.healthBG.Visible = false
                        objs.healthBar.Visible = false
                    end
                else
                    objs.healthBG.Visible = false
                    objs.healthBar.Visible = false
                end
            end
        end)
    end

    local function disableESP()
        notify(false)
        if renderConn then renderConn:Disconnect() renderConn = nil end
        if addConn then addConn:Disconnect() addConn = nil end
        if removeConn then removeConn:Disconnect() removeConn = nil end
        removeAllESP()
    end

    if survivorESPEnabled then
        enableESP()
    else
        disableESP()
    end
end)

esptab:Toggle("Killer ESP", function()
    local Workspace = game:GetService("Workspace")
    local RunService = game:GetService("RunService")
    local StarterGui = game:GetService("StarterGui")
    local cam = Workspace.CurrentCamera

    killerESPEnabled = not killerESPEnabled
    killerESPObjects = killerESPObjects or {}
    local renderConn, addConn, removeConn

    local function notify(state)
        pcall(function()
            StarterGui:SetCore("SendNotification", {
                Title = "Killer ESP",
                Text = state and "Enabled." or "Disabled.",
                Duration = 3
            })
        end)
    end

    local function createESP(model)
        local oldHl = model:FindFirstChildOfClass("Highlight")
        if oldHl then oldHl:Destroy() end
        local hl = Instance.new("Highlight")
        hl.FillTransparency = 1
        hl.OutlineTransparency = 0
        hl.OutlineColor = Color3.fromRGB(255,0,0)
        hl.Adornee = model
        hl.Parent = model
        local healthBG = Drawing.new("Square")
        healthBG.Filled = true
        healthBG.Color = Color3.fromRGB(0,0,0)
        healthBG.Transparency = 0.6
        local healthBar = Drawing.new("Square")
        healthBar.Filled = true
        healthBar.Color = Color3.fromRGB(255,0,0)
        healthBar.Transparency = 0.9
        killerESPObjects[model] = {
            highlight = hl,
            healthBG = healthBG,
            healthBar = healthBar
        }
    end

    local function removeESP(model)
        local objs = killerESPObjects[model]
        if objs then
            if objs.highlight and objs.highlight.Parent then objs.highlight:Destroy() end
            if objs.healthBG then objs.healthBG:Remove() end
            if objs.healthBar then objs.healthBar:Remove() end
            killerESPObjects[model] = nil
        end
        local stray = model:FindFirstChildOfClass("Highlight")
        if stray then stray:Destroy() end
    end

    local function removeAllESP()
        for model, objs in pairs(killerESPObjects) do
            if objs.highlight and objs.highlight.Parent then objs.highlight:Destroy() end
            if objs.healthBG then objs.healthBG:Remove() end
            if objs.healthBar then objs.healthBar:Remove() end
        end
        killerESPObjects = {}
        local killersFolder = Workspace:FindFirstChild("Killers")
        if killersFolder then
            for _, child in ipairs(killersFolder:GetChildren()) do
                local stray = child:FindFirstChildOfClass("Highlight")
                if stray then stray:Destroy() end
            end
        end
    end

    local function enableESP()
        notify(true)
        local killersFolder = Workspace:FindFirstChild("Killers")
        if not killersFolder then return end
        for _, model in ipairs(killersFolder:GetChildren()) do
            if model:IsA("Model") and model:FindFirstChildOfClass("Humanoid") then
                createESP(model)
            end
        end
        addConn = killersFolder.ChildAdded:Connect(function(child)
            if killerESPEnabled and child:IsA("Model") then
                local hum = child:FindFirstChildOfClass("Humanoid")
                if hum then createESP(child) end
                child.DescendantAdded:Connect(function(desc)
                    if killerESPEnabled and desc:IsA("Humanoid") then
                        createESP(child)
                    end
                end)
            end
        end)
        removeConn = killersFolder.ChildRemoved:Connect(function(child)
            removeESP(child)
        end)
        renderConn = RunService.RenderStepped:Connect(function()
            for model, objs in pairs(killerESPObjects) do
                local head = model:FindFirstChild("Head")
                local hum = model:FindFirstChildOfClass("Humanoid")
                if killerESPEnabled and head and hum then
                    local pos,onScreen = cam:WorldToViewportPoint(head.Position)
                    if onScreen then
                        local barWidth = 40
                        local barHeight = 4
                        local hpPercent = math.clamp(hum.Health/hum.MaxHealth,0,1)
                        local barY = pos.Y - 20
                        objs.healthBG.Visible = true
                        objs.healthBG.Size = Vector2.new(barWidth, barHeight)
                        objs.healthBG.Position = Vector2.new(pos.X - barWidth/2, barY)
                        objs.healthBar.Visible = true
                        objs.healthBar.Size = Vector2.new(barWidth*hpPercent, barHeight)
                        objs.healthBar.Position = Vector2.new(pos.X - barWidth/2, barY)
                    else
                        objs.healthBG.Visible = false
                        objs.healthBar.Visible = false
                    end
                else
                    objs.healthBG.Visible = false
                    objs.healthBar.Visible = false
                end
            end
        end)
    end

    local function disableESP()
        notify(false)
        if renderConn then renderConn:Disconnect() renderConn = nil end
        if addConn then addConn:Disconnect() addConn = nil end
        if removeConn then removeConn:Disconnect() removeConn = nil end
        removeAllESP()
    end

    if killerESPEnabled then
        enableESP()
    else
        disableESP()
    end
end)

maintab:Label("Gun Mods.")
local runService = game:GetService("RunService")
local players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local player = players.LocalPlayer

local model = workspace:WaitForChild("AREA51"):WaitForChild("PlantRoom"):WaitForChild("Box of Shells")
local box = model:WaitForChild("Box")
local originalCFrame = box.CFrame
local loopConnection
local infiniteAmmoEnabled = false

local function notifyy(title, text)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = title,
			Text = text,
			Duration = 3
		})
	end)
end

local function ghostifyModel()
	for _, item in ipairs(model:GetDescendants()) do
		if item:IsA("BasePart") then
			item.Transparency = 1
			item.CanCollide = false
		elseif item:IsA("Decal") or item:IsA("SurfaceGui") then
			item.Transparency = 1
		end
	end
end

local function enableInfiniteAmmo()
	infiniteAmmoEnabled = true
	notifyy("Infinite Ammo", "Enabled.")
	ghostifyModel()
	box.Anchored = true
	box.CanCollide = false

	local toggle = false
	local lastToggle = 0

	loopConnection = runService.RenderStepped:Connect(function(dt)
		local char = player.Character
		if not char then return end

		local root = char:FindFirstChild("HumanoidRootPart")
		if not root then return end

		lastToggle += dt
		if lastToggle >= 0.5 then
			lastToggle = 0
			toggle = not toggle

			if toggle then
				local offset = Vector3.new(0, -(root.Size.Y / 2 + box.Size.Y / 2 + 0.1), 0)
				local position = root.Position + offset
				box.CFrame = CFrame.new(position)
			else
				box.CFrame = originalCFrame
			end
		end
	end)
end

local function disableInfiniteAmmo()
	infiniteAmmoEnabled = false
	notifyy("Infinite Ammo", "Disabled.")
	if loopConnection then
		loopConnection:Disconnect()
		loopConnection = nil
	end
	box.CFrame = originalCFrame
end

maintab:Toggle("Infinite Ammo", function()
	if infiniteAmmoEnabled then
		disableInfiniteAmmo()
	else
		enableInfiniteAmmo()
	end
end)

local players = game:GetService("Players")
local userInput = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local player = players.LocalPlayer

local model = workspace:WaitForChild("AREA51"):WaitForChild("PlantRoom"):WaitForChild("Box of Shells")
local box = model:WaitForChild("Box")
local originalCFrame = box.CFrame
local fullAmmoConnection
local fullAmmoBindEnabled = false

local function notifyFullAmmo(title, text)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = title,
			Text = text,
			Duration = 3
		})
	end)
end

local function ghostifyModel()
	for _, item in ipairs(model:GetDescendants()) do
		if item:IsA("BasePart") then
			item.Transparency = 1
			item.CanCollide = false
		elseif item:IsA("Decal") or item:IsA("SurfaceGui") then
			item.Transparency = 1
		end
	end
end

local function unghostifyModel()
	for _, item in ipairs(model:GetDescendants()) do
		if item:IsA("BasePart") then
			item.Transparency = 0
			item.CanCollide = true
		elseif item:IsA("Decal") or item:IsA("SurfaceGui") then
			item.Transparency = 0
		end
	end
end

local function handleFullAmmoKey(input, gp)
	if gp or input.KeyCode ~= Enum.KeyCode.X then return end

	local char = player.Character
	if not char then return end
	local root = char:FindFirstChild("HumanoidRootPart")
	if not root then return end

	local offset = Vector3.new(0, -(root.Size.Y / 2 + box.Size.Y / 2 + 0.1), 0)
	local position = root.Position + offset

	ghostifyModel()
	box.CFrame = CFrame.new(position)
	task.wait(0.1)
	box.CFrame = originalCFrame
	unghostifyModel()
end

local function enableFullAmmoBind()
	fullAmmoBindEnabled = true
	box.Anchored = true
	box.CanCollide = false
	fullAmmoConnection = userInput.InputBegan:Connect(handleFullAmmoKey)
	notifyFullAmmo("Full Ammo", "Keybind Enabled.")
end

local function disableFullAmmoBind()
	fullAmmoBindEnabled = false
	if fullAmmoConnection then
		fullAmmoConnection:Disconnect()
		fullAmmoConnection = nil
	end
	box.CFrame = originalCFrame
	unghostifyModel()
	notifyFullAmmo("Full Ammo", "Keybind Disabled.")
end

maintab:Button("Full Ammo (Bind: X)", function()
	if fullAmmoBindEnabled then
		disableFullAmmoBind()
	else
		enableFullAmmoBind()
	end
end)

misctab:Button("Infinite Yield", function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

misctab:Button("Switch Servers", function()
    local servers = {}
    local req = game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true")
    local body = HttpService:JSONDecode(req)

    if body and body.data then
        for i, v in next, body.data do
            if type(v) == "table" and tonumber(v.playing) and tonumber(v.maxPlayers) and v.playing < v.maxPlayers and v.id ~= JobId then
                table.insert(servers, 1, v.id)
            end
        end
    end

    if #servers > 0 then
        TeleportService:TeleportToPlaceInstance(PlaceId, servers[math.random(1, #servers)], Players.LocalPlayer)
end
end)

helptab:Button("Copy Owner Discord Username", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Username",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("ghostofcelleron")
end)

helptab:Button("Copy Discord Server Invite", function()
local StarterGui = game:GetService("StarterGui")

StarterGui:SetCore("SendNotification", {
    Title = "Discord Invite",
    Text = "Copied to your clipboard!",
    Duration = 3,
    Button1 = "alright fella",
})
setclipboard("https://discord.gg/8stFYxJv4R")
end)
end
